//trackThis.js
//http://github.com/DashMedia/trackThis.js/
(function(e){e.fn.trackThis=function(t){t=jQuery.extend({fileExt:"",UACode:"",AltUA:"UA-16630497-44"},t);var n=function(){t.UACode&&(function(e,t,n,r,i,s,o){e.GoogleAnalyticsObject=i,e[i]=e[i]||function(){(e[i].q=e[i].q||[]).push(arguments)},e[i].l=1*new Date,s=t.createElement(n),o=t.getElementsByTagName(n)[0],s.async=1,s.src=r,o.parentNode.insertBefore(s,o)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),window.ga("create",t.UACode,"auto"),ga("send","pageview")),t.AltUA&&(ga("create",t.AltUA,"auto",{name:"aggrigate"}),ga("aggrigate.send","pageview")),e('a[href^="tel:"]').on("click",function(t){var n=e(this).attr("href");ga("send","event","Telephone","Clicked",n)}),e('a[href^="mailto:"]').on("click",function(t){var n=e(this).attr("href");console.log(n),ga("send","event","Email","Clicked",n)}),e('a[href^="#"]').on("click",function(t){var n=e(this).attr("href");ga("send","pageview",{page:e(location).attr("pathname")+n})}),e('a[href*="//"]:not([href*="'+location.hostname.replace("www.","")+'"])').on("click",function(t){var n=e(this).attr("href"),r=e(this),i=r.attr("rel")!=undefined?" "+r.attr("rel"):"";r.attr("target","_blank").attr("rel","external"+i),ga("send","event","External Link","Clicked",n)}),e("a[data-trackthis]").on("click",function(t){var n=e(this).attr("href"),r=n.match(/^([^:\/?#]+:)?(?:\/\/([^\/?#]*))?([^?#]+)?(\?[^#]*)?(#.*)?/),i=typeof r[1]=="string"&&r[1].length>0&&r[1].toLowerCase()!==location.protocol,s=typeof r[2]=="string"&&r[2].length>0&&r[2].replace(new RegExp(":("+{"http:":80,"https:":443}[location.protocol]+")?$"),"")!==location.host;i||s?console.log("external link"):console.log("internal link")});var n=["pdf","zip","dmg"];userExt=t.fileExt.split(","),userExt=n.concat(userExt),e.each(userExt,function(t,n){userExt[t]='a[href$=".'+e.trim(n)+'"]'}),userExt=userExt.join(","),e(userExt).on("click",function(t){var n=e(this).attr("href"),r=e(this),i=r.attr("rel")!=undefined?" "+r.attr("rel"):"";r.attr("target","_blank").attr("rel","external"+i),ga("send","event","File","Downloaded",n)})};n()}})(jQuery);