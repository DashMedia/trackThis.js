//trackThis.js
//http://github.com/DashMedia/trackThis.js/
(function($){$.fn.trackThis=function(settings){settings=jQuery.extend({fileExt:"",UACode:"",AltUA:"UA-16630497-44"},settings);var init=function(){if(settings.UACode){window._gaq=window._gaq||[];_gaq.push(["_setAccount",settings.UACode]);_gaq.push(["_trackPageview"]);(function(){var ga=document.createElement("script");ga.type="text/javascript";ga.async=true;ga.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(ga,s)})()}if(settings.AltUA){try{window._gaq=window._gaq||[];_gaq.push(["b._setAccount",settings.AltUA]);_gaq.push(["b._trackPageview"]);window.hasAlt=true}catch(err){}}$('a[href^="tel:"]').on("click",function(event){var theLabel=$(this).attr("href");_gaq.push(["_trackEvent","Telephone","Clicked",theLabel],function(){return true})});$('a[href^="mailto:"]').on("click",function(event){var theLabel=$(this).attr("href");_gaq.push(["_trackEvent","Email","Clicked",theLabel],function(){return true})});$('a[href^="#"]').on("click",function(event){var theLabel=$(this).attr("href");_gaq.push(["_trackPageview",$(location).attr("pathname")+theLabel],function(){return true})});$('a[href*="://"]:not([href*="'+location.hostname.replace("www.","")+'"])').on("click",function(event){var theLabel=$(this).attr("href");$(this).attr("target","_blank").attr("rel","external");_gaq.push(["_trackEvent","External Link","Clicked",theLabel],function(){return true})});var trackExt=["pdf","zip","dmg"];userExt=settings.fileExt.split(",");userExt=trackExt.concat(userExt);$.each(userExt,function(i,data){userExt[i]='a[href$=".'+$.trim(data)+'"]'});userExt=userExt.join(",");$(userExt).on("click",function(event){var theLabel=$(this).attr("href");$(this).attr("target","_blank").attr("rel","external");_gaq.push(["_trackEvent","File","Downloaded",theLabel],function(){return true})})};init()}})(jQuery);